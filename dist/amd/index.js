var __awaiter=this&&this.__awaiter||function(t,o,i,e){return new(i||(i=Promise))(function(n,r){function s(t){try{c(e.next(t))}catch(t){r(t)}}function d(t){try{c(e.throw(t))}catch(t){r(t)}}function c(t){var o;t.done?n(t.value):(o=t.value,o instanceof i?o:new i(function(t){t(o)})).then(s,d)}c((e=e.apply(t,o||[])).next())})};define("index",["require","exports","named-logs"],function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.PortisModuleLoader=void 0;const e=i.logs("web3w-portis:index");let n;const r={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",8:"ubiq",18:"thundercoreTestnet",42:"kovan",61:"classic",77:"sokol",99:"core",100:"xdai",108:"thundercore",163:"lightstreams"};class s{constructor(t,o){this.id="portis",this.dappId=t,this.forceNodeUrl=o&&o.forceNodeUrl,this.nodeUrl=o&&o.nodeUrl,this.chainId=o&&o.chainId,this.config=o}setup(t){return __awaiter(this,void 0,void 0,function*(){t=t||{};let{chainId:o,nodeUrl:i}=t;if(o=o||this.chainId,(i=i||this.nodeUrl)&&!o){const t=yield fetch(i,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify({id:Math.floor(1e6*Math.random()),jsonrpc:"2.0",method:"eth_chainId",params:[]}),method:"POST"}),e=yield t.json();o=parseInt(e.result.slice(2),16).toString()}if(!o)throw new Error("chainId missing");const s=r[o];let d;s&&!this.forceNodeUrl&&(d=s);const c=parseInt(o);if(!d&&i&&(d={nodeUrl:i,chainId:c},e.log("PORTIS with "+d.nodeUrl+" "+o)),!d)throw new Error(`chain (${o}) not supported by portis`);return this.portis=new n(this.dappId,d,this.config),this.portis.onError(t=>{e.error("PORTIS ERROR:"),e.error(t)}),this.portis.onActiveWalletChanged(t=>{e.log("PORTIS address: "+t)}),this.portis.onLogout(()=>{e.log("PORTIS logout ")}),this.portis.onLogin((t,o,i)=>{e.log("PORTIS login: "+t+","+o+","+i)}),window.portis=this.portis,{web3Provider:this.portis.provider,chainId:o}})}logout(){return this.portis.logout()}disconnect(){this.portis=void 0,window.portis=void 0}isLoggedIn(){return this.portis.isLoggedIn()}onAccountsChanged(t){this.portis.onActiveWalletChanged(o=>{t([o])})}}class d{constructor(t,o){this.id="portis",this.dappId=t,this.moduleConfig=o}static setJsURL(t,o){if(d._jsURLUsed)throw new Error("cannot change js url once used");d._jsURL=t,d._jsURLIntegrity=o}load(){return __awaiter(this,void 0,void 0,function*(){if(!n){const t=d._jsURL,o=d._jsURLIntegrity;d._jsURLUsed=!0;try{yield function(t,o,i){return new Promise(function(e,n){const r=document.createElement("script");r.type="text/javascript",r.src=t,o&&(r.integrity=o),i&&(r.crossOrigin=i),r.onload=r.onreadystatechange=function(){e()},r.onerror=function(){n()},document.head.appendChild(r)})}(t,o,"anonymous")}catch(t){throw d._jsURLUsed=!1,t}n=window.Portis}return new s(this.dappId,this.moduleConfig)})}}o.PortisModuleLoader=d,d._jsURL="https://cdn.jsdelivr.net/npm/@portis/web3@2.0.0-beta.56/umd/index.js",d._jsURLIntegrity="sha256-YglsZuKbHpe2+U4HYCd3juAiADRTU7Ys2AGfCGY+Nmo==",d._jsURLUsed=!1});